const entity = require('../examples/input.json');

const sprints = [];
const users = [];
const comments = [];
const commits = [];
const summaries = [];

entity.forEach((obj) => {
  switch (obj.type) {
    case 'Sprint':
      sprints.push(obj);
      break;
    case 'User':
      users.push(obj);
      break;
    case 'Comment':
      comments.push(obj);
      break;
    case 'Commit':
      commits.push(obj);
      break;
    case 'Summary':
      summaries.push(obj);
      break;
    default:
      break;
  }
});

const currentSprint = sprints.find((sprint) => sprint.id === 977);

const sprintCommits = commits.filter((commit) => commit.timestamp >= currentSprint.startAt
    && commit.timestamp <= currentSprint.finishAt);

it('1', () => {
  expect(leaders(sprintCommits, users)).toBe([
    {"id": 8, "name": "Александр Иванков", "avatar": "8.jpg", "valueText": "28"},
    {"id": 6, "name": "Андрей Мокроусов", "avatar": "6.jpg", "valueText": "21"},
    {"id": 9, "name": "Сергей Бережной", "avatar": "9.jpg", "valueText": "11"},
    {"id": 5, "name": "Александр Николаичев", "avatar": "5.jpg", "valueText": "7"},
    {"id": 11, "name": "Юрий Фролов", "avatar": "11.jpg", "valueText": "7"},
    {"id": 2, "name": "Александр Шлейко", "avatar": "2.jpg", "valueText": "6"},
    {"id": 4, "name": "Вадим Пацев", "avatar": "4.jpg", "valueText": "6"},
    {"id": 12, "name": "Алексей Ярошевич", "avatar": "12.jpg", "valueText": "5"},
    {"id": 3, "name": "Дарья Ковалева", "avatar": "3.jpg", "valueText": "4"},
    {"id": 10, "name": "Яна Берникова", "avatar": "10.jpg", "valueText": "4"},
    {"id": 7, "name": "Дмитрий Андриянов", "avatar": "7.jpg", "valueText": "3"},
    {"id": 1, "name": "Евгений Дементьев", "avatar": "1.jpg", "valueText": "2"}
  ]);
});